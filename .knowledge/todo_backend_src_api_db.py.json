{"is_source_file": true, "format": "Python", "description": "This source file defines a Python module for interacting with a Todo list stored in a SQLite database. It includes classes and functions for database initialization, CRUD operations, and data conversion related to 'todos'. It uses dataclasses, type annotations, and context managers.", "external_files": ["./models", "./schemas", "./repositories"], "external_methods": ["datetime.fromisoformat", "os.makedirs", "sqlite3.connect", "sqlite3.Row", "datetime.now", "yield"], "published": ["SQLiteRepository"], "classes": [{"name": "_Cols", "description": "A dataclass representing the column names of the 'todos' table in the database."}, {"name": "SQLiteRepository", "description": "A class providing methods for CRUD operations and database management for Todo entities using SQLite."}], "methods": [{"name": "None __init__(self, db_path: str)", "description": "Initializes the repository with the database path and sets up the database schema.", "scope": "SQLiteRepository", "scopeKind": "class"}, {"name": "Generator[sqlite3.Connection,None,None] _conn(self)", "description": "A context manager that provides a SQLite connection, manages transactions, and ensures cleanup.", "scope": "SQLiteRepository", "scopeKind": "class"}, {"name": "None _init_db(self)", "description": "Creates the database tables and indexes if they do not already exist.", "scope": "SQLiteRepository", "scopeKind": "class"}, {"name": "TodoEntity _row_to_entity(self, row: sqlite3.Row)", "description": "Converts a SQLite row into a TodoEntity dictionary.", "scope": "SQLiteRepository", "scopeKind": "class"}, {"name": "TodoEntity create(self, data: TodoCreate)", "description": "Creates a new Todo entry in the database.", "scope": "SQLiteRepository", "scopeKind": "class"}, {"name": "Optional[TodoEntity] get(self, todo_id: int)", "description": "Retrieves a Todo entry by its ID.", "scope": "SQLiteRepository", "scopeKind": "class"}, {"name": "Optional[TodoEntity] update(self, todo_id: int, data: TodoUpdate)", "description": "Updates an existing Todo entry identified by its ID.", "scope": "SQLiteRepository", "scopeKind": "class"}, {"name": "bool delete(self, todo_id: int)", "description": "Deletes a Todo entry by its ID.", "scope": "SQLiteRepository", "scopeKind": "class"}, {"name": "Tuple[List[TodoEntity],int] list(self, query: Optional[ListQuery] = None)", "description": "Retrieves a list of Todo entries based on optional filtering, sorting, and pagination.", "scope": "SQLiteRepository", "scopeKind": "class"}, {"name": "Optional[datetime] parse_dt(s: Optional[str])", "scope": "SQLiteRepository._row_to_entity", "scopeKind": "member", "description": "unavailable"}], "calls": ["os.makedirs", "sqlite3.connect", "conn.execute", "datetime.now", "datetime.fromisoformat"], "search-terms": ["SQLiteRepository", "db.py", "TodoEntity", "sql_create_table", "list method"], "state": 2, "file_id": 9, "knowledge_revision": 21, "git_revision": "a53da1bc5caa3f4aae1b369614a476ef784b85aa", "ctags": [{"_type": "tag", "name": "SQLiteRepository", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^class SQLiteRepository:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_COLS", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^_COLS = _Cols()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_Cols", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^class _Cols:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    def __init__(self, db_path: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, db_path: str)", "scope": "SQLiteRepository", "scopeKind": "class"}, {"_type": "tag", "name": "_conn", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    def _conn(self) -> Generator[sqlite3.Connection, None, None]:$/", "language": "Python", "typeref": "typename:Generator[sqlite3.Connection,None,None]", "kind": "member", "signature": "(self)", "scope": "SQLiteRepository", "scopeKind": "class"}, {"_type": "tag", "name": "_init_db", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    def _init_db(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "SQLiteRepository", "scopeKind": "class"}, {"_type": "tag", "name": "_row_to_entity", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    def _row_to_entity(self, row: sqlite3.Row) -> TodoEntity:$/", "language": "Python", "typeref": "typename:TodoEntity", "kind": "member", "signature": "(self, row: sqlite3.Row)", "scope": "SQLiteRepository", "scopeKind": "class"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    completed: str = \"completed\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "_Cols", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    def create(self, data: TodoCreate) -> TodoEntity:$/", "language": "Python", "typeref": "typename:TodoEntity", "kind": "member", "signature": "(self, data: TodoCreate)", "scope": "SQLiteRepository", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    created_at: str = \"created_at\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "_Cols", "scopeKind": "class"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    def delete(self, todo_id: int) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, todo_id: int)", "scope": "SQLiteRepository", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    description: str = \"description\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "_Cols", "scopeKind": "class"}, {"_type": "tag", "name": "due_date", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    due_date: str = \"due_date\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "_Cols", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    def get(self, todo_id: int) -> Optional[TodoEntity]:$/", "language": "Python", "typeref": "typename:Optional[TodoEntity]", "kind": "member", "signature": "(self, todo_id: int)", "scope": "SQLiteRepository", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    id: str = \"id\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "_Cols", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    def list(self, query: Optional[ListQuery] = None) -> Tuple[List[TodoEntity], int]:$/", "language": "Python", "typeref": "typename:Tuple[List[TodoEntity],int]", "kind": "member", "signature": "(self, query: Optional[ListQuery] = None)", "scope": "SQLiteRepository", "scopeKind": "class"}, {"_type": "tag", "name": "parse_dt", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^        def parse_dt(s: Optional[str]) -> Optional[datetime]:$/", "file": true, "language": "Python", "typeref": "typename:Optional[datetime]", "kind": "function", "signature": "(s: Optional[str])", "scope": "SQLiteRepository._row_to_entity", "scopeKind": "member"}, {"_type": "tag", "name": "table", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    table: str = \"todos\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "_Cols", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    title: str = \"title\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "_Cols", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    def update(self, todo_id: int, data: TodoUpdate) -> Optional[TodoEntity]:$/", "language": "Python", "typeref": "typename:Optional[TodoEntity]", "kind": "member", "signature": "(self, todo_id: int, data: TodoUpdate)", "scope": "SQLiteRepository", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/simple-task-manager-223342-223351/todo_backend/src/api/db.py", "pattern": "/^    updated_at: str = \"updated_at\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "_Cols", "scopeKind": "class"}], "hash": "844edf3fc082ca612a114610b0944788", "format-version": 4, "code-base-name": "todo_backend", "filename": "todo_backend/src/api/db.py", "fields": [{"name": "_COLS = _Cols()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str completed", "scope": "_Cols", "scopeKind": "class", "description": "unavailable"}, {"name": "str created_at", "scope": "_Cols", "scopeKind": "class", "description": "unavailable"}, {"name": "str description", "scope": "_Cols", "scopeKind": "class", "description": "unavailable"}, {"name": "str due_date", "scope": "_Cols", "scopeKind": "class", "description": "unavailable"}, {"name": "str id", "scope": "_Cols", "scopeKind": "class", "description": "unavailable"}, {"name": "str table", "scope": "_Cols", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "_Cols", "scopeKind": "class", "description": "unavailable"}, {"name": "str updated_at", "scope": "_Cols", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"21": "a53da1bc5caa3f4aae1b369614a476ef784b85aa"}]}